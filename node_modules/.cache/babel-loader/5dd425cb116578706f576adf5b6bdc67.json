{"ast":null,"code":"var _jsxFileName = \"C:\\\\Personal\\\\Predmeti\\\\DWS\\\\Vjezbe\\\\trazim-cimera\\\\trazimcimera\\\\src\\\\views\\\\Oglasi\\\\Oglasi.js\";\nimport React, { useState } from \"react\";\nimport classes from './Oglasi.css';\nimport Main from \"../../components/Main/Main\";\nimport Oglas from \"./Oglas/Oglas\";\nimport ToolbarLayout from \"../../components/ToolbarLayout/ToolbarLayout\";\nimport Cookies from 'js-cookie';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/react-hooks';\n\nconst Oglasi = props => {\n  const POSTS_QUERY = gql`\n    query {\n        posts {\n        post_id\n        description\n        address\n        rent\n        num_of_roommates\n        author {\n        user_id\n        username\n        name\n        surname\n        city\n        address\n        email\n        bio\n        gender\n        date_of_birth\n        pr_picture_url\n        pref_roommate_num\n        }\n        post_type {\n            post_type_id\n        }\n    }\n}`;\n  const [type, setType] = useState(2);\n  const user = Cookies.get(\"user\");\n  const token = user.toString().split('\"')[3];\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(POSTS_QUERY, {\n    context: {\n      headers: {\n        \"Authorization\": token\n      }\n    }\n  });\n  if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 25\n    }\n  }, \"U\\u010Ditavanje...\");\n  if (error) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 23\n    }\n  }, `Greška: ${error.message}`);\n  return /*#__PURE__*/React.createElement(ToolbarLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Main, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.Oglasi,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, \"Oglasi\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.Buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      setType(2);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, \"IMAM STAN\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      setType(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, \"NEMAM STAN\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.ListaMisljenja,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, data.posts.map(post => {\n    if (post.post_type.post_type_id == type) {\n      return /*#__PURE__*/React.createElement(Oglas, {\n        text: post.description,\n        brojCimera: post.num_of_roommates,\n        cijena: post.rent,\n        email: post.author.email,\n        adresa: post.address,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 44\n        }\n      });\n    }\n  })))));\n};\n\nexport default Oglasi;","map":{"version":3,"sources":["C:/Personal/Predmeti/DWS/Vjezbe/trazim-cimera/trazimcimera/src/views/Oglasi/Oglasi.js"],"names":["React","useState","classes","Main","Oglas","ToolbarLayout","Cookies","gql","useQuery","Oglasi","props","POSTS_QUERY","type","setType","user","get","token","toString","split","loading","error","data","context","headers","message","Buttons","ListaMisljenja","posts","map","post","post_type","post_type_id","description","num_of_roommates","rent","author","email","address"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,aAAP,MAA0B,8CAA1B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAAQC,QAAR,QAAuB,qBAAvB;;AAGA,MAAMC,MAAM,GAAIC,KAAD,IAAW;AAEtB,QAAMC,WAAW,GAAGJ,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;EAAxB;AA4BA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAMa,IAAI,GAAGR,OAAO,CAACS,GAAR,CAAY,MAAZ,CAAb;AACA,QAAMC,KAAK,GAAGF,IAAI,CAACG,QAAL,GAAgBC,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAd;AAEA,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,MAA2Bb,QAAQ,CAACG,WAAD,EAAc;AACnDW,IAAAA,OAAO,EAAE;AACLC,MAAAA,OAAO,EAAE;AACL,yBAAiBP;AADZ;AADJ;AAD0C,GAAd,CAAzC;AAQA,MAAIG,OAAJ,EAAa,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAP;AACb,MAAIC,KAAJ,EAAW,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK,WAAUA,KAAK,CAACI,OAAQ,EAA7B,CAAP;AAEX,sBACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAEtB,OAAO,CAACO,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,IAAA,SAAS,EAAEP,OAAO,CAACuB,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,OAAO,EAAE,MAAM;AAACZ,MAAAA,OAAO,CAAC,CAAD,CAAP;AAAW,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,eAEI;AAAQ,IAAA,OAAO,EAAE,MAAM;AAACA,MAAAA,OAAO,CAAC,CAAD,CAAP;AAAW,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,CAFJ,eAMI;AAAK,IAAA,SAAS,EAAEX,OAAO,CAACwB,cAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQL,IAAI,CAACM,KAAL,CAAWC,GAAX,CAAeC,IAAI,IAAI;AACnB,QAAGA,IAAI,CAACC,SAAL,CAAeC,YAAf,IAA+BnB,IAAlC,EAAwC;AACpC,0BAAO,oBAAC,KAAD;AACP,QAAA,IAAI,EAAEiB,IAAI,CAACG,WADJ;AAEP,QAAA,UAAU,EAAEH,IAAI,CAACI,gBAFV;AAGP,QAAA,MAAM,EAAEJ,IAAI,CAACK,IAHN;AAIP,QAAA,KAAK,EAAEL,IAAI,CAACM,MAAL,CAAYC,KAJZ;AAKP,QAAA,MAAM,EAAEP,IAAI,CAACQ,OALN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AAOH;AACJ,GAVD,CAFR,CANJ,CADJ,CADJ,CADJ;AA4BH,CAzED;;AA2EA,eAAe5B,MAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport classes from './Oglasi.css';\r\nimport Main from \"../../components/Main/Main\";\r\nimport Oglas from \"./Oglas/Oglas\";\r\nimport ToolbarLayout from \"../../components/ToolbarLayout/ToolbarLayout\";\r\nimport Cookies from 'js-cookie';\r\nimport gql from 'graphql-tag';\r\nimport {useQuery} from '@apollo/react-hooks';\r\n \r\n\r\nconst Oglasi = (props) => {\r\n\r\n    const POSTS_QUERY = gql`\r\n    query {\r\n        posts {\r\n        post_id\r\n        description\r\n        address\r\n        rent\r\n        num_of_roommates\r\n        author {\r\n        user_id\r\n        username\r\n        name\r\n        surname\r\n        city\r\n        address\r\n        email\r\n        bio\r\n        gender\r\n        date_of_birth\r\n        pr_picture_url\r\n        pref_roommate_num\r\n        }\r\n        post_type {\r\n            post_type_id\r\n        }\r\n    }\r\n}`;\r\n\r\n    const [type, setType] = useState(2);\r\n    const user = Cookies.get(\"user\");\r\n    const token = user.toString().split('\"')[3];\r\n\r\n    const { loading, error, data } = useQuery(POSTS_QUERY, {\r\n        context: {\r\n            headers: {\r\n                \"Authorization\": token\r\n            }\r\n        }\r\n    })\r\n\r\n    if (loading) return <p>Učitavanje...</p>\r\n    if (error) return <p>{`Greška: ${error.message}`}</p>\r\n\r\n    return (\r\n        <ToolbarLayout>\r\n            <Main>\r\n                <div className={classes.Oglasi}>\r\n                    <h1>Oglasi</h1>\r\n                    <div className={classes.Buttons}>\r\n                        <button onClick={() => {setType(2)}}>IMAM STAN</button>\r\n                        <button onClick={() => {setType(1)}}>NEMAM STAN</button>\r\n                    </div>\r\n                    <div className={classes.ListaMisljenja}>\r\n                        {\r\n                            data.posts.map(post => {\r\n                                if(post.post_type.post_type_id == type) {\r\n                                    return <Oglas \r\n                                    text={post.description}\r\n                                    brojCimera={post.num_of_roommates}\r\n                                    cijena={post.rent}\r\n                                    email={post.author.email}\r\n                                    adresa={post.address}\r\n                                    />\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </Main>\r\n        </ToolbarLayout>\r\n    )\r\n}\r\n\r\nexport default Oglasi;\r\n"]},"metadata":{},"sourceType":"module"}